{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\____________________\\\\.vscode\\\\\\u0432\\u0435\\u0431 3 \\u043B\\u0430\\u0431\\u0430 \\u0414\\\\websec-3\\\\instagram-clone\\\\src\\\\components\\\\post\\\\actions.js\",\n  _s = $RefreshSig$();\nimport { useState, useContext } from 'react';\nimport FirebaseContext from '../../context/firebase';\nimport UserContext from '../../context/user';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Actions(_ref) {\n  _s();\n  let {\n    docId,\n    totalLikes,\n    likedPhoto,\n    handleFocus\n  } = _ref;\n  const {\n    user: {\n      uid: userId\n    }\n  } = useContext(UserContext);\n  const [toggleLiked, setToggleLiked] = useState(likedPhoto);\n  const [likes, setLikes] = useState(totalLikes);\n  const {\n    firebase,\n    FieldValue\n  } = useContext(FirebaseContext);\n  const handleToggleLiked = async () => {\n    setToggleLiked(toggleLiked => !toggleLiked);\n    await firebase.firestore().collection('photos').doc(docId).update({\n      likes: toggleLiked ? FieldValue.arrayRemove(userId) : FieldValue.arrayUnion(userId)\n    });\n    setLikes(likes => toggleLiked ? likes - 1 : likes + 1);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex\",\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          onClick: handleFocus,\n          onKeyDown: event => {\n            if (event.key === 'Enter') {\n              handleFocus();\n            }\n          },\n          className: \"w-8 text-black-light select-none cursor-pointer focus:outline-none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          stroke: \"currentColor\",\n          tabIndex: 0,\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 py-0\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-bold\",\n        children: likes === 1 ? `${likes} like` : `${likes} likes`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Actions, \"gWRCSH8iZ9pzhc/ZLNmR8hwZ+Gg=\");\n_c = Actions;\nvar _c;\n$RefreshReg$(_c, \"Actions\");","map":{"version":3,"names":["useState","useContext","FirebaseContext","UserContext","Actions","docId","totalLikes","likedPhoto","handleFocus","user","uid","userId","toggleLiked","setToggleLiked","likes","setLikes","firebase","FieldValue","handleToggleLiked","firestore","collection","doc","update","arrayRemove","arrayUnion","event","key"],"sources":["C:/Users/____________________/.vscode/веб 3 лаба Д/websec-3/instagram-clone/src/components/post/actions.js"],"sourcesContent":["import { useState, useContext } from 'react';\r\nimport FirebaseContext from '../../context/firebase';\r\nimport UserContext from '../../context/user';\r\n\r\nexport default function Actions({ docId, totalLikes, likedPhoto, handleFocus }) {\r\n  const {\r\n    user: { uid: userId }\r\n  } = useContext(UserContext);\r\n  const [toggleLiked, setToggleLiked] = useState(likedPhoto);\r\n  const [likes, setLikes] = useState(totalLikes);\r\n  const { firebase, FieldValue } = useContext(FirebaseContext);\r\n\r\n  const handleToggleLiked = async () => {\r\n    setToggleLiked((toggleLiked) => !toggleLiked);\r\n\r\n    await firebase\r\n      .firestore()\r\n      .collection('photos')\r\n      .doc(docId)\r\n      .update({\r\n        likes: toggleLiked ? FieldValue.arrayRemove(userId) : FieldValue.arrayUnion(userId)\r\n      });\r\n\r\n    setLikes((likes) => (toggleLiked ? likes - 1 : likes + 1));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-between p-4\">\r\n        <div className=\"flex\">\r\n          {/* <svg\r\n            onClick={handleToggleLiked}\r\n            onKeyDown={(event) => {\r\n              if (event.key === 'Enter') {\r\n                handleToggleLiked();\r\n              }\r\n            }}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            tabIndex={0}\r\n            className={`w-8 mr-4 select-none cursor-pointer focus:outline-none ${\r\n              toggleLiked ? 'fill-red text-red-primary' : 'text-black-light'\r\n            }`}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\r\n            />\r\n          </svg> */}\r\n          <svg\r\n            onClick={handleFocus}\r\n            onKeyDown={(event) => {\r\n              if (event.key === 'Enter') {\r\n                handleFocus();\r\n              }\r\n            }}\r\n            className=\"w-8 text-black-light select-none cursor-pointer focus:outline-none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            tabIndex={0}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-4 py-0\">\r\n        <p className=\"font-bold\">{likes === 1 ? `${likes} like` : `${likes} likes`}</p>\r\n      </div>\r\n    </>\r\n  );\r\n}"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AAC5C,OAAOC,eAAe,MAAM,wBAAwB;AACpD,OAAOC,WAAW,MAAM,oBAAoB;AAAC;AAAA;AAE7C,eAAe,SAASC,OAAO,OAAiD;EAAA;EAAA,IAAhD;IAAEC,KAAK;IAAEC,UAAU;IAAEC,UAAU;IAAEC;EAAY,CAAC;EAC5E,MAAM;IACJC,IAAI,EAAE;MAAEC,GAAG,EAAEC;IAAO;EACtB,CAAC,GAAGV,UAAU,CAACE,WAAW,CAAC;EAC3B,MAAM,CAACS,WAAW,EAAEC,cAAc,CAAC,GAAGb,QAAQ,CAACO,UAAU,CAAC;EAC1D,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAACM,UAAU,CAAC;EAC9C,MAAM;IAAEU,QAAQ;IAAEC;EAAW,CAAC,GAAGhB,UAAU,CAACC,eAAe,CAAC;EAE5D,MAAMgB,iBAAiB,GAAG,YAAY;IACpCL,cAAc,CAAED,WAAW,IAAK,CAACA,WAAW,CAAC;IAE7C,MAAMI,QAAQ,CACXG,SAAS,EAAE,CACXC,UAAU,CAAC,QAAQ,CAAC,CACpBC,GAAG,CAAChB,KAAK,CAAC,CACViB,MAAM,CAAC;MACNR,KAAK,EAAEF,WAAW,GAAGK,UAAU,CAACM,WAAW,CAACZ,MAAM,CAAC,GAAGM,UAAU,CAACO,UAAU,CAACb,MAAM;IACpF,CAAC,CAAC;IAEJI,QAAQ,CAAED,KAAK,IAAMF,WAAW,GAAGE,KAAK,GAAG,CAAC,GAAGA,KAAK,GAAG,CAAE,CAAC;EAC5D,CAAC;EAED,oBACE;IAAA,wBACE;MAAK,SAAS,EAAC,0BAA0B;MAAA,uBACvC;QAAK,SAAS,EAAC,MAAM;QAAA,uBAwBnB;UACE,OAAO,EAAEN,WAAY;UACrB,SAAS,EAAGiB,KAAK,IAAK;YACpB,IAAIA,KAAK,CAACC,GAAG,KAAK,OAAO,EAAE;cACzBlB,WAAW,EAAE;YACf;UACF,CAAE;UACF,SAAS,EAAC,oEAAoE;UAC9E,KAAK,EAAC,4BAA4B;UAClC,IAAI,EAAC,MAAM;UACX,OAAO,EAAC,WAAW;UACnB,MAAM,EAAC,cAAc;UACrB,QAAQ,EAAE,CAAE;UAAA,uBAEZ;YACE,aAAa,EAAC,OAAO;YACrB,cAAc,EAAC,OAAO;YACtB,WAAW,EAAE,CAAE;YACf,CAAC,EAAC;UAA+J;YAAA;YAAA;YAAA;UAAA;QACjK;UAAA;UAAA;UAAA;QAAA;MACE;QAAA;QAAA;QAAA;MAAA;IACF;MAAA;MAAA;MAAA;IAAA,QACF,eACN;MAAK,SAAS,EAAC,UAAU;MAAA,uBACvB;QAAG,SAAS,EAAC,WAAW;QAAA,UAAEM,KAAK,KAAK,CAAC,GAAI,GAAEA,KAAM,OAAM,GAAI,GAAEA,KAAM;MAAO;QAAA;QAAA;QAAA;MAAA;IAAK;MAAA;MAAA;MAAA;IAAA,QAC3E;EAAA,gBACL;AAEP;AAAC,GA7EuBV,OAAO;AAAA,KAAPA,OAAO;AAAA;AAAA"},"metadata":{},"sourceType":"module"}